package com.CMPUT301F22T25.malwarepolymorphism.features.recipes.domain.UI;

import androidx.lifecycle.LiveData;
import androidx.lifecycle.MutableLiveData;
import androidx.lifecycle.ViewModel;

import com.CMPUT301F22T25.malwarepolymorphism.features.recipes.domain.entities.RecipeIngredientMember;

import java.util.ArrayList;
import java.util.List;

import javax.inject.Inject;

import dagger.hilt.android.lifecycle.HiltViewModel;

@HiltViewModel
public class EditRecipeViewModel extends ViewModel {

    private final MutableLiveData<List<RecipeIngredientMember>> currentlySelectedIngredients;
    private RecipeIngredientMember selectedMember;

    @Inject
    EditRecipeViewModel() {
        currentlySelectedIngredients = new MutableLiveData<>(new ArrayList<>());
    }

    public LiveData<List<RecipeIngredientMember>> getCurrentlySelectedIngredients() {
        return currentlySelectedIngredients;
    }

    public void setCurrentlySelectedIngredients(List<RecipeIngredientMember> currentlySelectedIngredients) {
        this.currentlySelectedIngredients.postValue(currentlySelectedIngredients);
    }

    public void addIngredientToSelected(RecipeIngredientMember selected) {
        List<RecipeIngredientMember> currentList = currentlySelectedIngredients.getValue();
        assert currentList != null;
        currentList.add(selected);
        currentlySelectedIngredients.postValue(currentList);
    }

    public void removeIngredientFromSelected(RecipeIngredientMember selected) {
        List<RecipeIngredientMember> currentList = currentlySelectedIngredients.getValue();
        assert currentList != null;
        currentList.remove(selected);
        currentlySelectedIngredients.postValue(currentList);
    }

    public void forceReload() {
        currentlySelectedIngredients.postValue(currentlySelectedIngredients.getValue());
    }

    public RecipeIngredientMember getSelectedMember() {
        return selectedMember;
    }

    public void setSelectedMember(RecipeIngredientMember selectedMember) {
        this.selectedMember = selectedMember;
    }
}
