package com.CMPUT301F22T25.malwarepolymorphism.features.mealplans.domain.data;

import com.CMPUT301F22T25.malwarepolymorphism.features.mealplans.domain.entities.MealPlanRecipeMember;
import com.CMPUT301F22T25.malwarepolymorphism.features.recipes.domain.entities.RecipeIngredientMember;

import org.checkerframework.checker.units.qual.A;

import java.time.Instant;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

/**
 * MealPlanAttributeBundle represents all the information that is needed to add a meal plan to the db.
 */
public class MealPlanAttributeBundle {
    private String title;
    private long numberOfServings;
    private Instant date;
    private List<MealPlanRecipeMember> recipes;
    private List<RecipeIngredientMember> ingredients;

    public MealPlanAttributeBundle(String title, long numberOfServings, Instant bestBefore,
                                   List<MealPlanRecipeMember> recipes, List<RecipeIngredientMember> ingredients){
        this.title = title;
        this.numberOfServings = numberOfServings;
        this.date = bestBefore;
        this.recipes = recipes;
        this.ingredients = ingredients;

    }

    /**
     *
     * @return title of the meal plan
     */

    public String getTitle() {
        return title;
    }

    /**
     * sets the title of the meal plan
     * @param title title to be set
     */
    public void setTitle(String title) {
        this.title = title;
    }

    /**
     *
     * @return number of servings
     */
    public long getNumberOfServings() {
        return numberOfServings;
    }

    /**
     * sets the no. of servings
     * @param numberOfServings number of servings to be set
     */
    public void setNumberOfServings(long numberOfServings) {
        this.numberOfServings = numberOfServings;
    }

    /**
     *
     * @return date of the meal plan
     */
    public Instant getDate() {
        return date;
    }

    /**
     * sets the date
     * @param date date to be set
     */
    public void setDate(Instant date) {
        this.date = date;
    }

    /**
     *
     * @return recipes
     */
    public List<MealPlanRecipeMember> getRecipes() {
        return recipes;
    }

    /**
     * sets recipes
     * @param recipes to be set
     */
    public void setRecipes(List<MealPlanRecipeMember> recipes) {
        this.recipes = recipes;
    }

    /**
     *
     * @return ingredients
     */
    public List<RecipeIngredientMember> getIngredients() {
        return ingredients;
    }

    /**
     * sets ingredients
     * @param ingredients to be set
     */
    public void setIngredients(List<RecipeIngredientMember> ingredients) {
        this.ingredients = ingredients;
    }

    public HashMap<String, Object> toHashMap() {
        List<HashMap<String, Object>> ingredientsList = new ArrayList<>();
        ingredients.forEach(member -> ingredientsList.add(member.toHashMap()));

        List<HashMap<String, Object>> recipeList = new ArrayList<>();
        recipes.forEach(member -> recipeList.add(member.toHashMap()));

        HashMap<String, Object> mealPlanData = new HashMap<>();
        mealPlanData.put("title", title);
        mealPlanData.put("servings", numberOfServings);
        mealPlanData.put("date", date.toEpochMilli());
        mealPlanData.put("ingredients", ingredientsList);
        mealPlanData.put("recipes", recipeList);
        return mealPlanData;
    }
}
